<div class="zc-container">
  <div class="zc-messages">
    <div class="loadingScrolling" ng-show="loading"></div>
    <div class="zc-day-messages" ng-repeat="dayMessage in dayMessagesMap">
      <fieldset>
        <legend align="center">{{dayMessage.date | date : "dd 'de' MMMM 'de' yyyy"}}</legend>
        <div ng-repeat="dayMessage in dayMessage.messages | orderBy : 'hour'">

          <div class="zc-message-header" ng-if="dayMessage.kind === 'user'">
            <div class="zc-profile-pic">
              <span class="glyphicon glyphicon-user" aria-hidden="true" ng-if="!dayMessage.user.profilePicUrl"></span>
              <img src="{{dayMessage.user.profilePicUrl}}" ng-if="dayMessage.user.profilePicUrl" height="40" width="40">
            </div>
            <div class="zc-user-name">
              <span ng-bind-html="dayMessage.user.name"></span>
            </div>
            <div class="zc-message-time">
              <span ng-bind-html="dayMessage.hour"></span>
            </div>
            <div class="zc-clear"></div>
          </div>
          <div class="zc-message-content" ng-if="dayMessage.kind === 'user'">
            <span zc-text-with-mentions="dayMessage.text"></span>
          </div>

          <div class="zc-message-header-system" ng-if="dayMessage.kind === 'system'">
            <div class="zc-message-icon">
              <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            </div>
            <div class="zc-system-message">
              <span zc-text-with-mentions="dayMessage.text"></span>
            </div>
            <div class="zc-message-time">
              <span ng-bind-html="dayMessage.hour"></span>
            </div>
            <div class="zc-clear"></div>
          </div>

        </div>
      </fieldset>
    </div>
  </div>
  <div class="zc-post-message">
    <div class="zc-profile-pic">
      <span class="glyphicon glyphicon-user" aria-hidden="true" ng-if="!user.profilePicUrl"></span>
      <img ng-src="{{user.profilePicUrl}}" ng-if="user.profilePicUrl" height="40" width="40">
    </div>
    <div class="zc-message-input">
      <script type="text/ng-template" id="/people-mentions.tpl">
        <ul class="dropdown-menu scrollable-menu" style="display:block">
          <li mentio-menu-item="item" ng-repeat="item in items track by $index">
            <div class="zc-ul-item-pic" style="display: inline-block;">
              <img ng-src="{{item.imageUrl}}" ng-if="item.imageUrl" height="40" width="40">
            </div>
            <span ng-bind-html="item.name | mentioHighlight:typedTerm:'menu-highlighted' | unsafe"></span>
          </li>
        </ul>
      </script>
      <textarea
        class="col-md-11 col-xs-11"
        mentio
        mentio-template-url="/people-mentions.tpl"
        mentio-select="getRawText(item)"
        mentio-search="searchItem(term)"
        mentio-items="items"
        placeholder="Digite uma mensagem aqui"
        rows="1"
        msd-elastic
        ng-model="newMessage" contenteditable="true"></textarea>

      <div class="col-md-1 col-xs-1">
        <button
          type="button"
          class="btn btn-primary"
          ng-click="postMessage()"
          ng-disabled="newMessage == ''">Postar</button>
      </div>
    </div>
  </div>
</div>
