<div>
  <div class="btn-group multiple-select-list" ng-class="{ 'open': show }">
    <button ng-disabled="loadingItems || errorLoadingItems" type="button"
            class="btn btn-default dropdown-toggle" ng-class="{ 'active': show }" ng-click="toggleList()">
      <span ng-if="errorLoadingItems"><span class="glyphicon glyphicon-alert"></span>Erro! Por favor, tente novamente em alguns momentos.</span>
      <span ng-if="loadingItems"><span class="glyphicon glyphicon-refresh rotating"></span> Carregando lista de itens...</span>
      <span ng-if="!errorLoadingItems && !loadingItems" class="excerpt">{{ getExcerpt() }}</span>
      <span ng-if="!errorLoadingItems && !loadingItems" class="pull-right"><span class="caret"
                                                                                 ng-class="{ 'reverse': show }"></span></span>
    </button>

    <div class="dropdown" ng-show="show" ng-if="!errorLoadingItems && !loadingItems">
      <div class="input-group input-group-lg search-bar">
        <input type="text" class="search-input" ng-model="q"/>
        <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
      </div>

      <ul>
        <li ng-repeat="item in items | filter: q">
          <a href="" ng-click="select(item)">
            <strong><span ng-bind-html="item.title | highlight: q"></span></strong>
            <i class="{{ selected(item) ? 'selected' : ''}} glyphicon glyphicon-ok pull-right"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>
